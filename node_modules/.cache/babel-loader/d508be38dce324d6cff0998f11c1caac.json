{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\react_project1\\\\src\\\\components\\\\shopping\\\\ShoppingCart.js\",\n    _s = $RefreshSig$();\n\nimport * as React from \"react\";\nimport { useState, useEffect } from \"react\";\nimport \"../../css/shoppingcart.css\";\nimport axios from \"axios\";\nimport { GoogleMap, LoadScript, DirectionsRenderer, DirectionsService } from \"@react-google-maps/api\";\nimport PropTypes from \"prop-types\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ExampleDirectionsPropTypes = {\n  styles: PropTypes.shape({\n    container: PropTypes.object.isRequired\n  }).isRequired\n};\n\nconst ShoppingCart = () => {\n  _s();\n\n  const [product, setProduct] = useState([]);\n  const [cart, setCart] = useState([]);\n  const [isLoading, setLoading] = useState(true);\n  const [response, setResponse] = React.useState(null);\n  const [origin, setOrigin] = React.useState(null);\n  const [destination, setDestination] = React.useState(null);\n  const [branch, setBranch] = useState(\"\");\n  const [car, setCar] = useState(\"\");\n  const [submitPurchase, setSubmitPurchase] = useState([]);\n  const [shippingCost, setShipping] = useState(0);\n  const [purchaseData, setPurchasedData] = useState([]);\n  const LOCAL_STORAGE_KEY = \"cart\";\n  var cartCount = 0;\n  var total = 0;\n  var cost = 0;\n  const containerStyle = {\n    width: \"100%\",\n    height: \"500px\"\n  };\n  const center = {\n    lat: 43.65,\n    lng: -79.38\n  };\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setSubmitPurchase({\n      branch: e.target[0].value,\n      car: e.target[1].value,\n      shipping: e.target[2].value,\n      name: e.target[3].value,\n      num: e.target[4].value,\n      expiry: e.target[5].value,\n      cvv: e.target[6].value,\n      user: localStorage.getItem(\"username\"),\n      cost: cost\n    });\n    setPurchasedData(cart);\n    setPurchasedData(purchaseData => purchaseData.concat(localStorage.getItem(\"username\")));\n    localStorage.removeItem(\"cart\");\n    axios({\n      method: \"post\",\n      url: \"http://localhost:8000/src/api/submit_purchase.php\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      data: submitPurchase\n    }).then(res => {\n      window.location = \"/invoice\";\n      return false;\n    }).catch(err => {\n      console.log(err);\n    });\n  };\n\n  useEffect(() => {\n    axios({\n      method: \"post\",\n      url: \"http://localhost:8000/src/api/submit_purchase.php\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      data: submitPurchase\n    }).catch(err => {\n      console.log(err);\n    });\n  }, [submitPurchase]);\n  const directionsCallback = React.useCallback(res => {\n    if (res !== null) {\n      if (res.status === \"OK\") {\n        setResponse(res);\n      } else {\n        console.log(\"response: \", res);\n      }\n    }\n  }, []);\n  useEffect(() => {\n    generateProducts();\n    const storedCart = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n    if (storedCart) setCart(storedCart);\n  }, []);\n  useEffect(() => {\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(cart));\n  }, [cart]);\n  useEffect(() => {\n    console.log(purchaseData);\n    axios({\n      method: \"post\",\n      url: \"http://localhost:8000/src/api/send_cart.php\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      data: purchaseData\n    }).catch(err => {\n      console.log(err);\n    });\n  }, [purchaseData]);\n\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 12\n    }, this);\n  }\n\n  function generateProducts() {\n    axios({\n      method: \"post\",\n      url: \"http://localhost:8000/src/api/get_checkout.php\",\n      headers: {\n        \"content-type\": \"application/json\"\n      },\n      data: {\n        user: localStorage.getItem(\"username\")\n      }\n    }).then(res => {\n      setProduct(res.data.product);\n      setOrigin(res.data.address);\n      setBranch(res.data.branch);\n      setCar(res.data.car);\n      setLoading(false);\n    }).catch(err => {\n      console.log(err);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"row\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"col s12 m12 l9\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Checkout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"mapdiv\",\n            class: \"col s12 m12 l9\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"map\",\n              children: /*#__PURE__*/_jsxDEV(LoadScript, {\n                googleMapsApiKey: \"AIzaSyDf5iT2KI8tPal0EAflGoI2WNfnXXp3nHc\",\n                children: /*#__PURE__*/_jsxDEV(GoogleMap, {\n                  id: \"direction-example\",\n                  mapContainerStyle: containerStyle,\n                  zoom: 9,\n                  center: center,\n                  children: [destination !== \"\" && origin !== \"\" && /*#__PURE__*/_jsxDEV(DirectionsService, {\n                    options: {\n                      destination,\n                      origin,\n                      travelMode: \"DRIVING\"\n                    },\n                    callback: directionsCallback\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 163,\n                    columnNumber: 23\n                  }, this), response !== null && /*#__PURE__*/_jsxDEV(DirectionsRenderer, {\n                    options: {\n                      directions: response\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            id: \"order\",\n            method: \"post\",\n            onSubmit: handleSubmit,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-field col s12\",\n              onChange: e => {\n                const selectedTable = e.target.value;\n                setDestination(selectedTable);\n              },\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"browser-default choice\",\n                id: \"end\",\n                name: \"end\",\n                required: true,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  disabled: true,\n                  selected: true,\n                  children: \"Choose a Branch\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 19\n                }, this), branch.map(item => {\n                  return /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: item[\"branch_addy\"],\n                    children: item[\"branch_addy\"]\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 23\n                  }, this);\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"input-field col s12\",\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"browser-default choice\",\n                name: \"car\",\n                id: \"car\",\n                required: true,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  disabled: true,\n                  selected: true,\n                  children: \"Choose a Car\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 19\n                }, this), car.map(item => {\n                  return /*#__PURE__*/_jsxDEV(\"option\", {\n                    value: item[\"model\"],\n                    children: item[\"model\"] + \" - Available\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 222,\n                    columnNumber: 23\n                  }, this);\n                })]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 210,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-field col s12\",\n              onChange: e => {\n                const shipCost = e.target.value;\n                setShipping(shipCost);\n              },\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                className: \"browser-default choice\",\n                name: \"date\",\n                id: \"date\",\n                required: true,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"\",\n                  disabled: true,\n                  selected: true,\n                  children: \"Choose a Delivery Option\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"0\",\n                  children: \"FREE - No-Rush Shipping\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 245,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"6.99\",\n                  children: \"$6.99 - One-Day Shipping\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"5.99\",\n                  children: \"$5.99 - Two-Day Shipping\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 229,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-field col s12\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"first_name\",\n                type: \"text\",\n                class: \"validate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"first_name\",\n                children: \"Name on Card\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-field col s12\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"card_num\",\n                type: \"text\",\n                class: \"validate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"card_num\",\n                children: \"Card Number\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-field col s6\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"expires\",\n                type: \"text\",\n                class: \"validate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"expires\",\n                children: \"Expiry Date\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-field col s6\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"cvv\",\n                type: \"text\",\n                class: \"validate\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                for: \"cvv\",\n                children: \"CVV\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"hidden\",\n              id: \"FinalValue\",\n              name: \"FinalValue\",\n              value: \"128.98\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              class: \"btn waves-effect waves-light save-button\",\n              type: \"submit\",\n              name: \"trip_submit\",\n              style: {\n                marginTop: \"30px\",\n                background: \"#149BBB\"\n              },\n              children: \"Place Order\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"col s12 m12 l3\",\n          id: \"full\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"div1\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \"Cart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"card-panel horizontal medium\",\n              id: \"card' . $counter . '\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"card-stacked\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"card-content\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    style: {\n                      color: \"black\",\n                      fontWeight: \"bold\"\n                    },\n                    class: \"card-title\",\n                    children: \"Summary\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 297,\n                    columnNumber: 21\n                  }, this), cart.map(item => {\n                    const price = product[item - 1][\"prod_price\"];\n                    total += parseFloat(price);\n                    cost = Math.round((total * 1.13 - total * 0.15 + parseFloat(shippingCost)) * 100) / 100;\n                  }), /*#__PURE__*/_jsxDEV(\"p\", {\n                    id: \"subtotal\",\n                    children: \"Subtotal: $\" + Math.round(total * 100) / 100\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 315,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    id: \"shipping\",\n                    children: \"Shipping & Handling: $\" + shippingCost\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 318,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Taxes: $\" + Math.round(total * 0.13 * 100) / 100\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 321,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Savings: -$\" + Math.round(total * 0.15 * 100) / 100\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 322,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    id: \"total\",\n                    children: \"TOTAL: $\" + cost\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 325,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 296,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 15\n            }, this), cart.map(item => {\n              cartCount++;\n              const name = product[item - 1][\"prod_name\"];\n              const price = product[item - 1][\"prod_price\"];\n              const imgurl = product[item - 1][\"img_url\"];\n              const img = \"http://localhost:8000/src/\" + imgurl;\n              return /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"card horizontal small\",\n                id: \"card\" + cartCount,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"card-image cart-img\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: img\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 340,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 339,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"card-stacked\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"card-content\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      class: \"cardspan card-title\",\n                      style: {\n                        color: \"black\",\n                        fontWeight: \"bold\"\n                      },\n                      children: name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 344,\n                      columnNumber: 25\n                    }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: [\"$\", price]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 350,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 343,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 342,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 19\n              }, this);\n            })]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 148,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ShoppingCart, \"VV/tWfLuJRFAiCAFbDVdhC5sWuQ=\");\n\n_c = ShoppingCart;\nShoppingCart.propTypes = ExampleDirectionsPropTypes;\nexport default _c2 = /*#__PURE__*/React.memo(ShoppingCart);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ShoppingCart\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["C:/xampp/htdocs/react_project1/src/components/shopping/ShoppingCart.js"],"names":["React","useState","useEffect","axios","GoogleMap","LoadScript","DirectionsRenderer","DirectionsService","PropTypes","ExampleDirectionsPropTypes","styles","shape","container","object","isRequired","ShoppingCart","product","setProduct","cart","setCart","isLoading","setLoading","response","setResponse","origin","setOrigin","destination","setDestination","branch","setBranch","car","setCar","submitPurchase","setSubmitPurchase","shippingCost","setShipping","purchaseData","setPurchasedData","LOCAL_STORAGE_KEY","cartCount","total","cost","containerStyle","width","height","center","lat","lng","handleSubmit","e","preventDefault","target","value","shipping","name","num","expiry","cvv","user","localStorage","getItem","concat","removeItem","method","url","headers","data","then","res","window","location","catch","err","console","log","directionsCallback","useCallback","status","generateProducts","storedCart","JSON","parse","setItem","stringify","address","travelMode","directions","selectedTable","map","item","shipCost","marginTop","background","color","fontWeight","price","parseFloat","Math","round","imgurl","img","propTypes","memo"],"mappings":"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","sourcesContent":["import * as React from \"react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport \"../../css/shoppingcart.css\";\r\nimport axios from \"axios\";\r\n\r\nimport {\r\n  GoogleMap,\r\n  LoadScript,\r\n  DirectionsRenderer,\r\n  DirectionsService,\r\n} from \"@react-google-maps/api\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nconst ExampleDirectionsPropTypes = {\r\n  styles: PropTypes.shape({\r\n    container: PropTypes.object.isRequired,\r\n  }).isRequired,\r\n};\r\n\r\nconst ShoppingCart = () => {\r\n  const [product, setProduct] = useState([]);\r\n  const [cart, setCart] = useState([]);\r\n  const [isLoading, setLoading] = useState(true);\r\n  const [response, setResponse] = React.useState(null);\r\n  const [origin, setOrigin] = React.useState(null);\r\n  const [destination, setDestination] = React.useState(null);\r\n  const [branch, setBranch] = useState(\"\");\r\n  const [car, setCar] = useState(\"\");\r\n  const [submitPurchase, setSubmitPurchase] = useState([]);\r\n  const [shippingCost, setShipping] = useState(0);\r\n  const [purchaseData, setPurchasedData] = useState([]);\r\n\r\n  const LOCAL_STORAGE_KEY = \"cart\";\r\n  var cartCount = 0;\r\n  var total = 0;\r\n  var cost = 0;\r\n  const containerStyle = {\r\n    width: \"100%\",\r\n    height: \"500px\",\r\n  };\r\n\r\n  const center = {\r\n    lat: 43.65,\r\n    lng: -79.38,\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setSubmitPurchase({\r\n      branch: e.target[0].value,\r\n      car: e.target[1].value,\r\n      shipping: e.target[2].value,\r\n      name: e.target[3].value,\r\n      num: e.target[4].value,\r\n      expiry: e.target[5].value,\r\n      cvv: e.target[6].value,\r\n      user: localStorage.getItem(\"username\"),\r\n      cost: cost,\r\n    });\r\n    setPurchasedData(cart); \r\n    setPurchasedData(purchaseData => purchaseData.concat(localStorage.getItem(\"username\")));\r\n    localStorage.removeItem(\"cart\");\r\n    axios({\r\n      method: \"post\",\r\n      url: \"http://localhost:8000/src/api/submit_purchase.php\",\r\n      headers: { \"content-type\": \"application/json\" },\r\n      data: submitPurchase,\r\n    })\r\n      .then((res) => {\r\n        window.location = \"/invoice\";\r\n        return false;\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    axios({\r\n      method: \"post\",\r\n      url: \"http://localhost:8000/src/api/submit_purchase.php\",\r\n      headers: { \"content-type\": \"application/json\" },\r\n      data: submitPurchase,\r\n    }).catch((err) => {\r\n      console.log(err);\r\n    });\r\n  }, [submitPurchase]);\r\n\r\n  const directionsCallback = React.useCallback((res) => {\r\n    if (res !== null) {\r\n      if (res.status === \"OK\") {\r\n        setResponse(res);\r\n      } else {\r\n        console.log(\"response: \", res);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    generateProducts();\r\n    const storedCart = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\r\n    if (storedCart) setCart(storedCart);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(cart));\r\n  }, [cart]);\r\n\r\n  useEffect(() => {\r\n   console.log(purchaseData);\r\n   axios({\r\n    method: \"post\",\r\n    url: \"http://localhost:8000/src/api/send_cart.php\",\r\n    headers: { \"content-type\": \"application/json\" },\r\n    data: purchaseData,\r\n  })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n  }, [purchaseData]);\r\n\r\n  if (isLoading) {\r\n    return <div className=\"App\">Loading...</div>;\r\n  }\r\n\r\n  function generateProducts() {\r\n    axios({\r\n      method: \"post\",\r\n      url: \"http://localhost:8000/src/api/get_checkout.php\",\r\n      headers: { \"content-type\": \"application/json\" },\r\n      data: { user: localStorage.getItem(\"username\") },\r\n    })\r\n      .then((res) => {\r\n        setProduct(res.data.product);\r\n        setOrigin(res.data.address);\r\n        setBranch(res.data.branch);\r\n        setCar(res.data.car);\r\n        setLoading(false);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <div class=\"row\">\r\n        <div class=\"container\">\r\n          <div class=\"col s12 m12 l9\">\r\n            <h1>Checkout</h1>\r\n            <div id=\"mapdiv\" class=\"col s12 m12 l9\">\r\n              <div id=\"map\">\r\n                <LoadScript googleMapsApiKey=\"AIzaSyDf5iT2KI8tPal0EAflGoI2WNfnXXp3nHc\">\r\n                  <GoogleMap\r\n                    id=\"direction-example\"\r\n                    mapContainerStyle={containerStyle}\r\n                    zoom={9}\r\n                    center={center}\r\n                  >\r\n                    {destination !== \"\" && origin !== \"\" && (\r\n                      <DirectionsService\r\n                        options={{\r\n                          destination,\r\n                          origin,\r\n                          travelMode: \"DRIVING\",\r\n                        }}\r\n                        callback={directionsCallback}\r\n                      />\r\n                    )}\r\n\r\n                    {response !== null && (\r\n                      <DirectionsRenderer options={{ directions: response }} />\r\n                    )}\r\n                  </GoogleMap>\r\n                </LoadScript>\r\n              </div>\r\n            </div>\r\n\r\n            <form id=\"order\" method=\"post\" onSubmit={handleSubmit}>\r\n              <div\r\n                className=\"input-field col s12\"\r\n                onChange={(e) => {\r\n                  const selectedTable = e.target.value;\r\n                  setDestination(selectedTable);\r\n                }}\r\n              >\r\n                <select\r\n                  className=\"browser-default choice\"\r\n                  id=\"end\"\r\n                  name=\"end\"\r\n                  required\r\n                >\r\n                  <option disabled selected>\r\n                    Choose a Branch\r\n                  </option>\r\n\r\n                  {branch.map((item) => {\r\n                    return (\r\n                      <option value={item[\"branch_addy\"]}>\r\n                        {item[\"branch_addy\"]}\r\n                      </option>\r\n                    );\r\n                  })}\r\n                </select>\r\n              </div>\r\n\r\n              <div class=\"input-field col s12\">\r\n                <select\r\n                  className=\"browser-default choice\"\r\n                  name=\"car\"\r\n                  id=\"car\"\r\n                  required\r\n                >\r\n                  <option value=\"\" disabled selected>\r\n                    Choose a Car\r\n                  </option>\r\n\r\n                  {car.map((item) => {\r\n                    return (\r\n                      <option value={item[\"model\"]}>\r\n                        {item[\"model\"] + \" - Available\"}\r\n                      </option>\r\n                    );\r\n                  })}\r\n                </select>\r\n              </div>\r\n              <div\r\n                className=\"input-field col s12\"\r\n                onChange={(e) => {\r\n                  const shipCost = e.target.value;\r\n                  setShipping(shipCost);\r\n                }}\r\n              >\r\n                <select\r\n                  className=\"browser-default choice\"\r\n                  name=\"date\"\r\n                  id=\"date\"\r\n                  required\r\n                >\r\n                  <option value=\"\" disabled selected>\r\n                    Choose a Delivery Option\r\n                  </option>\r\n                  <option value=\"0\">FREE - No-Rush Shipping</option>\r\n                  <option value=\"6.99\">$6.99 - One-Day Shipping</option>\r\n                  <option value=\"5.99\">$5.99 - Two-Day Shipping</option>\r\n                </select>\r\n              </div>\r\n\r\n              <div className=\"input-field col s12\">\r\n                <input id=\"first_name\" type=\"text\" class=\"validate\" />\r\n                <label for=\"first_name\">Name on Card</label>\r\n              </div>\r\n\r\n              <div className=\"input-field col s12\">\r\n                <input id=\"card_num\" type=\"text\" class=\"validate\" />\r\n                <label for=\"card_num\">Card Number</label>\r\n              </div>\r\n\r\n              <div className=\"input-field col s6\">\r\n                <input id=\"expires\" type=\"text\" class=\"validate\" />\r\n                <label for=\"expires\">Expiry Date</label>\r\n              </div>\r\n\r\n              <div className=\"input-field col s6\">\r\n                <input id=\"cvv\" type=\"text\" class=\"validate\" />\r\n                <label for=\"cvv\">CVV</label>\r\n              </div>\r\n\r\n              <input\r\n                type=\"hidden\"\r\n                id=\"FinalValue\"\r\n                name=\"FinalValue\"\r\n                value=\"128.98\"\r\n              ></input>\r\n              <button\r\n                class=\"btn waves-effect waves-light save-button\"\r\n                type=\"submit\"\r\n                name=\"trip_submit\"\r\n                style={{ marginTop: \"30px\", background: \"#149BBB\" }}\r\n              >\r\n                Place Order\r\n              </button>\r\n            </form>\r\n          </div>\r\n\r\n          <div class=\"col s12 m12 l3\" id=\"full\">\r\n            <div id=\"div1\">\r\n              <h1>Cart</h1>\r\n              <div\r\n                class=\"card-panel horizontal medium\"\r\n                id=\"card' . $counter . '\"\r\n              >\r\n                <div class=\"card-stacked\">\r\n                  <div class=\"card-content\">\r\n                    <span\r\n                      style={{ color: \"black\", fontWeight: \"bold\" }}\r\n                      class=\"card-title\"\r\n                    >\r\n                      Summary\r\n                    </span>\r\n                    {cart.map((item) => {\r\n                      const price = product[item - 1][\"prod_price\"];\r\n                      total += parseFloat(price);\r\n                      cost =\r\n                        Math.round(\r\n                          (total * 1.13 -\r\n                            total * 0.15 +\r\n                            parseFloat(shippingCost)) *\r\n                            100\r\n                        ) / 100;\r\n                    })}\r\n\r\n                    <p id=\"subtotal\">\r\n                      {\"Subtotal: $\" + Math.round(total * 100) / 100}\r\n                    </p>\r\n                    <p id=\"shipping\">\r\n                      {\"Shipping & Handling: $\" + shippingCost}\r\n                    </p>\r\n                    <p>{\"Taxes: $\" + Math.round(total * 0.13 * 100) / 100}</p>\r\n                    <p>\r\n                      {\"Savings: -$\" + Math.round(total * 0.15 * 100) / 100}\r\n                    </p>\r\n                    <p id=\"total\">{\"TOTAL: $\" + cost}</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              {cart.map((item) => {\r\n                cartCount++;\r\n                const name = product[item - 1][\"prod_name\"];\r\n                const price = product[item - 1][\"prod_price\"];\r\n                const imgurl = product[item - 1][\"img_url\"];\r\n\r\n                const img = \"http://localhost:8000/src/\" + imgurl;\r\n\r\n                return (\r\n                  <div class=\"card horizontal small\" id={\"card\" + cartCount}>\r\n                    <div class=\"card-image cart-img\">\r\n                      <img src={img} />\r\n                    </div>\r\n                    <div class=\"card-stacked\">\r\n                      <div class=\"card-content\">\r\n                        <span\r\n                          class=\"cardspan card-title\"\r\n                          style={{ color: \"black\", fontWeight: \"bold\" }}\r\n                        >\r\n                          {name}\r\n                        </span>{\" \"}\r\n                        <p>${price}</p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nShoppingCart.propTypes = ExampleDirectionsPropTypes;\r\n\r\nexport default React.memo(ShoppingCart);\r\n"]},"metadata":{},"sourceType":"module"}